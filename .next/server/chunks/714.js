exports.id=714,exports.ids=[714],exports.modules={98155:(e,t,r)=>{Promise.resolve().then(r.bind(r,49690)),Promise.resolve().then(r.bind(r,40381)),Promise.resolve().then(r.bind(r,99030)),Promise.resolve().then(r.bind(r,56500))},45932:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},7833:(e,t,r)=>{"use strict";r.d(t,{$2:()=>o,EF:()=>i,HW:()=>l,OB:()=>a,P7:()=>c,r7:()=>d,zQ:()=>n}),r(15424);var s=r(46242),n=(0,s.$)("a18f3caa8936c15bf195e1c37d02fef5e0a23a51"),o=(0,s.$)("2f6c76f24d5939aee4e2efac0f9d592f7739abcd"),a=(0,s.$)("cec6511c6012591018a8abb38c5e0e8ab8320ac2"),i=(0,s.$)("b86ecc6d5690362205972786256030e39b40b4c7"),c=(0,s.$)("f2a94d884370614724e0162983f4f8332313e4e4"),l=(0,s.$)("9d6f14d8821bab9b959e840f793b10a07be88c0a"),d=(0,s.$)("2b26542d218fc73998a86464cad6afb0588db3b0")},99030:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var s=r(10326),n=r(17577),o=r(77109),a=r(90434),i=r(60850),c=r(72607),l=r(14831),d=r(61561),u=r(73064),f=r(76812),m=r(91175);let p=u.fC,g=u.xz;u.ZA,u.Uv,u.Tr,u.Ee,n.forwardRef(({className:e,inset:t,children:r,...n},o)=>(0,s.jsxs)(u.fF,{ref:o,className:(0,m.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(f.XCv,{className:"ml-auto h-4 w-4"})]})).displayName=u.fF.displayName,n.forwardRef(({className:e,...t},r)=>s.jsx(u.tu,{ref:r,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=u.tu.displayName;let h=n.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(u.Uv,{children:s.jsx(u.VY,{ref:n,sideOffset:t,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));h.displayName=u.VY.displayName;let b=n.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(u.ck,{ref:n,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));function y(){let{setTheme:e}=(0,l.F)();return(0,s.jsxs)(p,{children:[s.jsx(g,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"outline",size:"icon",children:[s.jsx(i.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(c.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),s.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,s.jsxs)(h,{align:"end",children:[s.jsx(b,{onClick:()=>e("light"),children:"Light"}),s.jsx(b,{onClick:()=>e("dark"),children:"Dark"}),s.jsx(b,{onClick:()=>e("system"),children:"System"})]})]})}b.displayName=u.ck.displayName,n.forwardRef(({className:e,children:t,checked:r,...n},o)=>(0,s.jsxs)(u.oC,{ref:o,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(u.wU,{children:s.jsx(f.nQG,{className:"h-4 w-4"})})}),t]})).displayName=u.oC.displayName,n.forwardRef(({className:e,children:t,...r},n)=>(0,s.jsxs)(u.Rk,{ref:n,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(u.wU,{children:s.jsx(f.jXb,{className:"h-4 w-4 fill-current"})})}),t]})).displayName=u.Rk.displayName,n.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(u.__,{ref:n,className:(0,m.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r})).displayName=u.__.displayName,n.forwardRef(({className:e,...t},r)=>s.jsx(u.Z0,{ref:r,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=u.Z0.displayName;let w=()=>{let{data:e}=(0,o.useSession)();return(0,s.jsxs)("nav",{className:"flex justify-between items-center p-4 bg-white dark:bg-black sticky",children:[s.jsx(a.default,{href:"/",children:s.jsx("div",{className:"text-lg md:text-2xl m-4 font-bold text-center bg-clip-text text-transparent   bg-gradient-to-b from-neutral-900 to-neutral-600 dark:from-neutral-50 dark:to-neutral-400 bg-opacity-50",children:"Test.ai"})}),(0,s.jsxs)("div",{className:"flex space-x-4 items-center",children:[s.jsx(y,{}),e?s.jsx(d.z,{onClick:()=>(0,o.signOut)({callbackUrl:"/"}),className:"px-4 py-2 text-white bg-black dark:bg-white dark:text-black rounded hover:bg-red-700 transition",children:"Sign Out"}):s.jsx(s.Fragment,{})]})]})}},56500:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>i});var s=r(10326),n=r(77109);r(17577);var o=r(14831);function a({children:e,...t}){return s.jsx(o.f,{...t,children:e})}let i=({children:e})=>s.jsx(n.SessionProvider,{children:s.jsx(a,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:e})})},61561:(e,t,r)=>{"use strict";r.d(t,{z:()=>l});var s=r(10326),n=r(17577),o=r(34214),a=r(28671),i=r(91175);let c=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},l)=>{let d=n?o.g7:"button";return s.jsx(d,{className:(0,i.cn)(c({variant:t,size:r,className:e})),ref:l,...a})});l.displayName="Button"},91175:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var s=r(41135),n=r(31009);function o(...e){return(0,n.m6)((0,s.W)(e))}},13818:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$ACTION_0:()=>b,$$ACTION_1:()=>x,createTest:()=>f,getAllTests:()=>y,getTestById:()=>m,getTestResult:()=>g,getTestStats:()=>w,getUserTests:()=>h,submitTest:()=>p});var s=r(27745);r(26461);var n=r(59300),o=r(58320),a=r(11185),i=r.n(a);let c=new(i()).Schema({userId:{type:String,required:!0},testId:{type:i().Schema.Types.ObjectId,ref:"Test",required:!0},difficulty:{type:String,enum:["easy","medium","hard"],required:!0},score:{type:Number,required:!0},correctAnswers:{type:Number,required:!0},wrongAnswers:{type:Number,required:!0},analysis:{type:String,required:!0},questions:[{questionText:{type:String,required:!0},options:{type:[String],required:!0},correctAnswer:{type:String,required:!0},userAnswer:{type:String,required:!0},isCorrect:{type:Boolean,required:!0},explanation:{type:String,required:!0}}],userAnswers:{type:Map,of:String,required:!0}},{timestamps:!0}),l=i().models.TestResult||i().model("TestResult",c);var d=r(5964),u=r(85723);async function f(e){try{await (0,d.Z)();let t=await (0,n.i)(e);if(console.log(t,"from create test"),!Array.isArray(t)||0===t.length)throw Error("Invalid questions generated");let r=new o.Z({...e,questions:t});return await r.save(),{success:!0,testId:r._id.toString()}}catch(e){return console.error("Error creating test:",e),{success:!1,error:e.message}}}async function m(e){try{await (0,d.Z)();let t=await o.Z.findById(e);if(console.log(t,"From actions page"),!t)return null;return JSON.parse(JSON.stringify(t))}catch(e){return console.error("Error fetching test:",e),null}}async function p(e,t,r){try{let s;await (0,d.Z)();let a=await o.Z.findById(e);if(!a)return console.error("Test not found:",e),{success:!1,error:"Test not found"};console.log("Verifying test with Gemini...");try{s=await (0,n.P)(a,t)}catch(e){return console.error("Error verifying test with Gemini:",e),{success:!1,error:"Failed to verify test results"}}console.log("Gemini result:",s);let i=a.questions.map((e,r)=>({questionText:e.text,options:e.options,correctAnswer:e.correctAnswer,userAnswer:t[e._id],isCorrect:s.questionResults[r].isCorrect,explanation:s.questionResults[r].explanation}));console.log(i);let c=new l({userId:r,testId:e,difficulty:a.difficulty,score:s.score,correctAnswers:s.correctAnswers,wrongAnswers:s.wrongAnswers,analysis:s.analysis,questions:i,userAnswers:t});return console.log(c,"the result we are getting"),console.log("Saving test result..."),await c.save(),console.log("Test result saved successfully"),{success:!0,resultId:c._id.toString()}}catch(e){return console.error("Error submitting test:",e),{success:!1,error:e.message||"Failed to submit test"}}}async function g(e,t){try{await (0,d.Z)();let r=await l.findOne({_id:e,userId:t}).populate({path:"testId",select:"title questions"});if(!r)return{success:!1,error:"Test result not found"};let s={id:r._id.toString(),title:r.testId.title,date:r.createdAt,score:r.score,correctAnswers:r.correctAnswers,wrongAnswers:r.wrongAnswers,analysis:r.analysis,questions:r.questions.map((e,t)=>({questionText:e.questionText,options:e.options,userAnswer:e.userAnswer,correctAnswer:e.correctAnswer,isCorrect:e.isCorrect,explanation:e.explanation})),userAnswers:Array.from(r.userAnswers.entries())};return{success:!0,data:s}}catch(e){return console.error("Error fetching test result:",e),{success:!1,error:"Failed to fetch test result"}}}let h=(0,s.j)("f223bb2d09d305c1f7367d1193d9f6e89374457f",b);async function b(e){try{await (0,d.Z)();let t=await l.find({userId:e}).populate("testId","title").sort({createdAt:-1});return 0===t.length&&console.warn("No test results found for user ID:",e),t.map(e=>({id:e._id.toString(),title:e.testId?.title||"Untitled Test",date:e.createdAt,score:e.score}))}catch(e){return console.error("Error fetching user tests:",e),[]}}async function y(){try{await (0,d.Z)();let e=await o.Z.find({},{_id:1,title:1,description:1,duration:1,difficulty:1,numQuestions:{$size:"$questions"}}).sort({createdAt:-1});return JSON.parse(JSON.stringify(e))}catch(e){throw console.error("Error fetching all tests:",e),Error("Failed to fetch tests")}}let w=(0,s.j)("1b7dbd0aff498d2f860eac667d974c8b5bc745ce",x);async function x(e){try{await (0,d.Z)();let t=await l.aggregate([{$match:{userId:e}},{$lookup:{from:"tests",localField:"testId",foreignField:"_id",as:"testDetails"}},{$unwind:"$testDetails"},{$group:{_id:"$testDetails.difficulty",count:{$sum:1}}}]),r=t.find(e=>"easy"===e._id)?.count||0,s=t.find(e=>"medium"===e._id)?.count||0,n=t.find(e=>"hard"===e._id)?.count||0;return{easy:r,medium:s,hard:n}}catch(e){return console.error("Error fetching test stats:",e),{easy:0,medium:0,hard:0}}}(0,u.h)([f,m,p,g,h,y,w]),(0,s.j)("2f6c76f24d5939aee4e2efac0f9d592f7739abcd",f),(0,s.j)("cec6511c6012591018a8abb38c5e0e8ab8320ac2",m),(0,s.j)("b86ecc6d5690362205972786256030e39b40b4c7",p),(0,s.j)("f2a94d884370614724e0162983f4f8332313e4e4",g),(0,s.j)("9d6f14d8821bab9b959e840f793b10a07be88c0a",h),(0,s.j)("2b26542d218fc73998a86464cad6afb0588db3b0",y),(0,s.j)("a18f3caa8936c15bf195e1c37d02fef5e0a23a51",w)},74986:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,metadata:()=>m});var s=r(19510),n=r(12265),o=r.n(n),a=r(36668),i=r.n(a);r(5023);var c=r(19125),l=r(68570);let d=(0,l.createProxy)(String.raw`/Users/yash/DevProjects/fullStack/test.ai/src/components/Navbar.jsx#default`),u=(0,l.createProxy)(String.raw`/Users/yash/DevProjects/fullStack/test.ai/src/components/providers.jsx#Providers`);var f=r(36674);let m={title:"Test.ai",description:"AI-Powered Quizzes Tailored to Boost Your Knowledge"};function p({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:`${o().variable} ${i().variable} font-sans dark:bg-black`,children:[s.jsx(f.c,{}),(0,s.jsxs)(u,{children:[s.jsx(c.x7,{}),s.jsx("header",{className:"flex-none w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx(d,{})}),s.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 dark:bg-black h-screen font-sans",children:e})]})]})})}},5964:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(11185),n=r.n(s);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let a=global.mongoose;a||(a=global.mongoose={conn:null,promise:null});let i=async function(){if(a.conn)return a.conn;a.promise||(console.log("Connecting to MongoDB..."),a.promise=n().connect(o,{bufferCommands:!1}).then(e=>(console.log("Connected to MongoDB"),e)));try{a.conn=await a.promise}catch(e){throw a.promise=null,console.error("Failed to connect to MongoDB:",e),e}return a.conn}},59300:(e,t,r)=>{"use strict";r.d(t,{P:()=>a,i:()=>o});let s=new(r(97388)).$D(process.env.GEMINI_API_KEY);function n(e){return JSON.parse(e=(e=e.replace(/```json\n?|\n?```/g,"").trim()).replace(/^\s+|\s+$/g,""))}async function o(e){let t=s.getGenerativeModel({model:"gemini-pro"}),r=`Generate ${e.numQuestions} multiple-choice questions for a ${e.difficulty} level test on ${e.tags}. 
  The test title is "${e.title}" and the description is "${e.description}". 
  For each question, provide the following details:
  - 'text': The question text as a string.
  - 'options': An array of 4 distinct answer options (as strings).
  - 'correctAnswer': The correct answer as a string, matching one of the options.

  Format the response as a JSON array of objects, each containing 'text', 'options', and 'correctAnswer'. 
  Do not include any markdown formatting or additional text outside of the JSON array.`;try{let e=await t.generateContent(r),s=await e.response,o=(await s.text()).trim(),a=n(o);if(!Array.isArray(a)||0===a.length)throw Error("Invalid question format");return a}catch(e){throw console.error("Failed to parse Gemini response:",e),console.error("Raw response:",text),Error("Failed to generate questions")}}async function a(e,t){console.log("Verifying test with Gemini...",{test:e,userAnswers:t});let r=s.getGenerativeModel({model:"gemini-pro"}),o=`
    Analyze the following test results:
    Test: ${JSON.stringify(e)}
    User Answers: ${JSON.stringify(t)}

    Please provide:
    1. The score (percentage of correct answers)
    2. Number of correct answers
    3. Number of wrong answers
    4. A brief analysis of the user's performance, including topics they need to improve
    5. For each question, provide:
       - Whether the user's answer was correct or not
       - A brief explanation of why it was correct or incorrect

    Format the response as a JSON object with the following structure:
    {
      "score": number,
      "correctAnswers": number,
      "wrongAnswers": number,
      "analysis": string,
      "questionResults": [
        {
          "isCorrect": boolean,
          "explanation": string
        },
        ...
      ]
    }
  `,a=(await r.generateContent(o)).response.text();console.log("Gemini API response:",a);try{return n(a)}catch(e){throw console.error("Failed to parse Gemini response:",e),console.error("Raw response:",a),Error("Failed to verify test results")}}},58320:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(11185),n=r.n(s);let o=new(n()).Schema({title:{type:String,required:!0},description:{type:String,required:!0},numQuestions:{type:Number,required:!0},difficulty:{type:String,enum:["easy","medium","hard"],required:!0},timeLimit:{type:Number,required:!0},tags:{type:[String],default:[]},questions:[{text:String,options:[String],correctAnswer:String}]},{timestamps:!0}),a=n().models.Test||n().model("Test",o)},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(66621);let n=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5023:()=>{}};